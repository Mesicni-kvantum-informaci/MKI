\documentclass{../../../style/mkimain}

\series{0}
\month{null}
\year{0000}

\usepackage{xparse}
\usepackage{xstring}
\usepackage{expl3}

%! Custom commands definition

% Defines points sum command
\newcommand{\psum}[6]{
\IfInteger{#1}
{\IfInteger{#2}
    {\IfInteger{#3}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #3 + #4 + #5 + #6 \relax}
                    {\the\numexpr #1 + #2 + #3 + #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #3 + #4 + #6 \relax}
                    {\the\numexpr #1 + #2 + #3 + #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #3 + #5 + #6 \relax}
                    {\the\numexpr #1 + #2 + #3 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #3 + #6 \relax}
                    {\the\numexpr #1 + #2 + #3 \relax}}}}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #4 + #5 + #6 \relax}
                    {\the\numexpr #1 + #2 + #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #4 + #6 \relax}
                    {\the\numexpr #1 + #2 + #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #5 + #6 \relax}
                    {\the\numexpr #1 + #2 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #2 + #6 \relax}
                    {\the\numexpr #1 + #2 \relax}}}}}
    {\IfInteger{#3}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #3 + #4 + #5 + #6 \relax}
                    {\the\numexpr #1 + #3 + #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #3 + #4 + #6 \relax}
                    {\the\numexpr #1 + #3 + #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #3 + #5 + #6 \relax}
                    {\the\numexpr #1 + #3 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #3 + #6 \relax}
                    {\the\numexpr #1 + #3 \relax}}}}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #4 + #5 + #6 \relax}
                    {\the\numexpr #1 + #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #4 + #6 \relax}
                    {\the\numexpr #1 + #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #5 + #6 \relax}
                    {\the\numexpr #1 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #1 + #6 \relax}
                    {\the\numexpr #1 \relax}}}}}
}
{\IfInteger{#2}
    {\IfInteger{#3}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #3 + #4 + #5 + #6 \relax}
                    {\the\numexpr #2 + #3 + #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #3 + #4 + #6 \relax}
                    {\the\numexpr #2 + #3 + #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #3 + #5 + #6 \relax}
                    {\the\numexpr #2 + #3 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #3 + #6 \relax}
                    {\the\numexpr #2 + #3 \relax}}}}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #4 + #5 + #6 \relax}
                    {\the\numexpr #2 + #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #4 + #6 \relax}
                    {\the\numexpr #2 + #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #5 + #6 \relax}
                    {\the\numexpr #2 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #2 + #6 \relax}
                    {\the\numexpr #2 \relax}}}}}
    {\IfInteger{#3}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #3 + #4 + #5 + #6 \relax}
                    {\the\numexpr #3 + #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #3 + #4 + #6 \relax}
                    {\the\numexpr #3 + #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #3 + #5 + #6 \relax}
                    {\the\numexpr #3 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #3 + #6 \relax}
                    {\the\numexpr #3 \relax}}}}
        {\IfInteger{#4}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #4 + #5 + #6 \relax}
                    {\the\numexpr #4 + #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #4 + #6 \relax}
                    {\the\numexpr #4 \relax}}}
            {\IfInteger{#5}
                {\IfInteger{#6}
                    {\the\numexpr #5 + #6 \relax}
                    {\the\numexpr #5 \relax}}
                {\IfInteger{#6}
                    {\the\numexpr #6 \relax}
                    {-}}}}}
}
}

\ExplSyntaxOn 
\cs_set_eq:NN \fpeval \fp_eval:n 
\ExplSyntaxOff

% Defines division command
\newcommand{\pdiv} [2] {
\def\x{#1}    
\def\y{#1}
\fpeval{\x/\y}
    %\the\numexpr #1 / #2 \relax
%\IfInteger{#1}
%    {\IfInteger{#2}
%        {\the\numexpr #1/#2 \relax}
%        {-}}
%    {-}
}

% Defines multiplication command
\newcommand{\pmult} [2] {\the\numexpr #1*#2 \relax}

% Defines \# command
\newcommand{\hashtag}{
    \pdiv{\pmult{100}{\entrysum}}{\corrsum}
}

% Defines \% command


% Defines \correntry for later use (calculating percentages), takes 1 arg of form {U1, U2, U3, A, K, B}
\NewDocumentCommand{\correntry}{ >{\SplitArgument{5}{,}} m}{\corrrowgen#1}

\NewDocumentCommand{\corrrowgen}{mmmmmm}{%
    \global\def\corrU1{#1}
    \global\def\corrU2{#2}
    \global\def\corrU3{#3}
    \global\def\corrA{#4}
    \global\def\corrK{#5}
    \global\def\corrB{#6}
    \global\def\corrsum{\psum{#1}{#2}{#3}{#4}{#5}{#6}}
    %
\noindent\textbf{Student Pilný} & \textbf{?} & \textbf{#1} & \textbf{#2} & \textbf{#3} & \textbf{#4} & \textbf{#5} & \textbf{#6} & 100 & 100 & \corrsum
}

% Takes 1 arg of form {Name, Class, U1, U2, U3, A, K, B} 
\NewDocumentCommand{\entry}{ >{\SplitArgument{7}{,}} m}{\rowgen#1}

\NewDocumentCommand{\rowgen}{mmmmmmmm}{%
    \global\def\entrysum{\psum{#3}{#4}{#5}{#6}{#7}{#8}}
%
#1 & #2 & #3 & #4 & #5 & #6 & #7 & #8 & \entrysum & \hashtag & \entrysum
}

\begin{document}
\setlength{\arrayrulewidth}{0.5mm}
\noindent\begin{tabular}{ l c c c c c c c|c c c }
    \textbf{Jméno}  & \textbf{Třída} & \textbf{U1} & \textbf{U2} & \textbf{U3} & \textbf{A} & \textbf{K} & \textbf{B} & \textbf{\%}  & \textbf{\#}  & \textbf{$\Sigma$} \\
    \textbf{Student   Pilný} & ?     & \textbf{3}  & \textbf{4}  & \textbf{3}  & \textbf{6} & \textbf{3} & \textbf{5} & \textbf{100} & \textbf{100} & \textbf{24}  \\
    \correntry{3, 4, 3, 6, 3, 5} \\
    \hline
    Lucie Závodná       & 5.A & 3 & 4 & 2 & 7 & 3 & 5 & 100 & 100 & 24 \\
    \entry{Lucie Závodná, 5.A, 3, 4, 2, 7, 3, 5} \\
    Nikol Leyman        & 5.A & 3 & 3 & 2 & 7 & 3 & 4 & 92  & 92  & 22 \\
    \entry{Nikol Leyman, 5.A, 3, 3, 2, 7, 3, 4} \\
    Anna   Petrusková   & 5.B & 3 & 4 & 3 & 6 & 3 & - & 100 & 79  & 19 \\
    \entry{Anna Petrusková, 5.B, 3, 4, 3, 6, 3, -} \\
    Anna Trnková        & 6.A & 3 & 4 & 3 & 4 & 3 & - & 89  & 71  & 17 \\
    \entry{Anna Trnková, 6.A, 3, 4, 3, 4, 3, -} \\
    Emma   Hrdličková   & 5.B & 3 & 2 & 1 & 6 & 3 & 1 & 67  & 67  & 16 \\
    \entry{Emma Hrdličková, 5.B, 3, 2, 1, 6, 3, 1} \\
    Jonáš Mládek        & 5.B & 3 & 1 & 3 & 4 & 3 & 2 & 67  & 67  & 16 \\
    \entry{Jonáš Mládek, 5.B, 3, 1, 3, 4, 3, 2} \\
\end{tabular}
\\
\\
\%\, \dots\, úspěšnost v řešených úlohách
\\
\#\, \dots\, úspěšnost ve všech úlohách
\\
$\Sigma$\, \dots\, celkový počet bodů 
\end{document}